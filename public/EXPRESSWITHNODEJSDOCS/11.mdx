# Тема #11: Введение в Express.js

## 1. Что такое Express?

- **Не Node.js**: Express — это не замена Node.js, а фреймворк, который работает поверх Node.js.
- **Веб-фреймворк**: Это минималистичный, гибкий и "не имеющий своего мнения" (unopinionated) фреймворк для создания веб-приложений и API на Node.js. Он был долгое время (и во многом остается) стандартом де-факто для построения серверов на Node.js.
- **Назначение**: Значительно упростить и структурировать обработку HTTP-запросов, маршрутизацию (роутинг), использование промежуточного ПО (middleware) и отправку ответов по сравнению с использованием чистого модуля http.

## 2. Философия: Минимализм и Middleware

### Минималистичное Ядро
Сам Express предоставляет только базовый набор инструментов: роутинг и систему middleware. Он не навязывает вам конкретную структуру проекта, шаблонизатор, ORM или способ аутентификации.

### Всё через Middleware
Почти вся дополнительная функциональность (парсинг тела запроса, работа с сессиями, логирование, CORS, сжатие ответов и т.д.) добавляется через промежуточное ПО (middleware) — функции, которые обрабатывают запрос по цепочке.

### Критический взгляд (Плюсы и Минусы Минимализма)

**Плюсы**:
- Гибкость (выбираете только то, что нужно)
- Легкость (небольшое ядро)
- Простота изучения основ

**Минусы**:
- Требует от разработчика больше решений по выбору и настройке дополнительных модулей для стандартных задач
- Может приводить к неконсистентности архитектуры в разных проектах или даже внутри одного, если нет четких соглашений
- Новичкам может быть сложнее собрать полный стек
- Это привело к появлению более "комплексных" фреймворков поверх Express (например, NestJS) или альтернатив

## 3. Базовая Структура Приложения Express

Создать простой сервер на Express гораздо лаконичнее, чем на чистом http.

```javascript
// 1. Подключаем express
const express = require('express'); // Или: import express from 'express'; (если настроен ESM)

// 2. Создаем экземпляр приложения
const app = express();
const port = 3003; // Порт для сервера

// 3. Определяем маршрут (Route) и его обработчик (Handler)
// Обрабатываем GET запросы на корневой путь '/'
app.get('/', (req, res) => {
  // req - объект запроса (расширенный по сравнению с http.IncomingMessage)
  // res - объект ответа (расширенный по сравнению с http.ServerResponse)

  // Используем удобный метод res.send()
  res.send('Hello World from Express!');
});

// Еще один маршрут
app.get('/about', (req, res) => {
  res.json({ page: 'About', version: 1.0 }); // Удобный метод для отправки JSON
});

// 4. Запускаем сервер на прослушивание порта
app.listen(port, () => {
  console.log(`Express server запущен на http://localhost:${port}`);
});
```

## 4. Ключевые Абстракции Express

- **Приложение (app = express())**: Главный объект вашего приложения.
- **Маршрутизация (app.METHOD(PATH, HANDLER))**: Удобный способ определить, какая функция (HANDLER) должна обработать запрос в зависимости от HTTP-метода (get, post, put, delete и т.д.) и пути (PATH). (Подробнее в следующей теме).
- **Middleware (Промежуточное ПО)**: Функции, которые выполняются перед обработчиком маршрута (или вместо него). Они имеют доступ к req, res и следующей функции в цепочке (next). Используются для логирования, парсинга тела запроса, аутентификации, валидации и т.д. (Подробнее в отдельной теме).
- **Объекты req и res**: Express расширяет стандартные объекты request и response из модуля http, добавляя множество полезных свойств и методов (req.params, req.query, req.body, res.json(), res.send(), res.status(), res.sendFile() и т.д.), что сильно упрощает работу с запросом и ответом.

## 5. Критический Взгляд: Почему Express так популярен?

- **Простота Старта**: Начать работу с Express и создать простое API или веб-страницу очень легко.
- **Гибкость**: Не навязывает жесткую структуру.
- **Огромная Экосистема Middleware**: Существует middleware почти для любой мыслимой задачи.
- **Хорошая Документация и Сообщество**: Легко найти ответы и примеры.
- **Стабильность**: Express существует давно и является очень зрелым и стабильным фреймворком.

## Итог

Express — это надстройка над модулем http Node.js, которая предоставляет удобные абстракции для маршрутизации и обработки запросов с помощью middleware. Его минимализм дает гибкость, но требует от разработчика самостоятельного выбора и интеграции дополнительных инструментов для построения полнофункционального приложения.

Понимание основ Express критически важно для большинства Node.js разработчиков, так как он является основой для огромного количества проектов и даже используется внутри некоторых более высокоуровневых фреймворков.
